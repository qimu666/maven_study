# 							:sparkles:记录学习代码的各个阶段:sparkles:

>- **by 柒木**
>
>- **💬 微信：aqimu66（请备注事由）**



## 分层开发

分层开发是什么？

​	把一个Java项目中，所有的代码，根据其不同的用途和功能，以及面向的使用者的不同，把代码分为不同的包、层，用来区分代码之间的区别，提高代码的可维护性、可读性。

分层开发能分成哪些层？

​	按功能分：

​			**持久化层**(**dao**  |  **mapper**)：专门**与数据库进行交互**，这个层的所有类，主要功能都在与数据库进行交互。

​			**服务层**(**service**)：为用户提供服务，这个层是专门用来实现项目中的一些业务流程的层面，这个层的代码相对来说比较复杂，功能多种多样，但是都是为了**实现项目中的业务逻辑**。

​			**控制层**(**controller** | **handler**)：与用户进行交互的层，主要用来接收用户的请求，调用服务层完成用户的请求，并接收服务层的返回值，将数据进行基本处理后，把用户所需要的数据及视图，返回给用户。控制层有三个主要功能：**接收请求**，**调用处理方法**，**返回响应**。

​			**视图层**(**view**)：很有可能不在Java代码当中，视图层是用户看到的用户界面，用户在视图层进行操作，将数据发送给控制层，并接收控制层返回的响应数据，并将响应数据处理后，以视图的形式展现给用户。视图层可采用的技术有很多（JSP，Thymeleaf ， vue ，HTML ....）

​	有一些不在功能层面的类，如实体类、工具类、测试类、公用类、VO...，这些类通常会单独根据功能或用途进行分包。

​			**实体类包**(**entity** | **Pojo** | **domain** | **bean**)：这个包都是要构建实例对象的类，在现实或者功能中有具体的映射对象的类，比如：用户、班级、学校、动物、产品.....

​			**工具类包**(**util** | **tool**)：这个包主要用来放通用的工具，jdbc工具，字符串校验工具、加密工具....

1. 为什么要分层开发？

​		分层开发的优点：优化代码结构，让项目的可读性、可维护性、可扩展性在项目的结构上能变得更加优秀，让项目更加优雅。



## Web服务器

**web是什么？**在线的网页应用。

**服务器是什么？** 提供服务的网络处理器，是一台在网络上被公开的计算机。公开之后服务器有自己的地址(URL)，可以通过地址(URL)访问到服务器提供的服务。

**Web服务器是什么？**

​	并不是物理意义上的服务器，通常被理解为 **运行web应用的服务程序**，会被叫做 web应用服务器。web服务器本身也是应用程序，不过它可以用来运行其他web应用，所以被叫做web应用服务器。



## Web三大组件

### Servlet

​	Servlet是页面与Java后台交互的类，专门用来与视图层进行交互。Servlet可以做的事有：接收请求，处理请求，发送响应。

​	Servlet是特殊的Java类，有自己专门的接口和API，并不在JDK中包含，需要引入依赖Jar包。



#### 创建Servlet的方式

> 1. extends HttpServlet，并重写其中的doGet与doPost方法
> 2. implements Servlet，并实现其中的生命周期方法
> 3. 

#### Servlet的生命周期

> 1. 初始化 init：只有在对应的url-pattern被首次调用时才会触发，并且只能触发一次。
> 2. 服务 service：每次对应的url-pattern被调用时都会触发
> 3. 销毁 distory：服务器关闭时会被触发

```xml
<web-app version="3.0"  
        xmlns="http://java.sun.com/xml/ns/javaee"  
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
		http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
</web-app>

```

## JSP

JSP是什么？（**Java Server Pages** ）Java服务页面，JSP可以直接为用户提供服务支持，JSP页面其实是一个另类的Servlet。

### JSP页面的构成

> * HTML标签
> * 脚本



### JSP基本语法

#### 脚本

> **代码脚本**
>
> <%           Java代码            %>
>
> **输出脚本**
>
> <%=     Java代码中要输出的内容   %>



### JSP内置对象

JSP的内置对象一共有9个。

> * **request**：请求对象。是一个HttpServletRequest类的实例对象
> * **response**：响应对象。是一个HttpServletResponse类的实例对象
> * **session**：会话对象。是一个HttpSession类的实例对象
>   * session创建后不会自动关闭，但是可以手动关闭。
>   * session在未销毁之前，在页面中和后台的数据是共享的。
> * **application**：应用对象。是一个ServletContext类的实例对象。
> * **out**：输出对象，本质上是一个流
> * **page**：页面对象，每一个页面只有一个，指代页面本身。
> * **config**：配置对象，是一个ServletConfig类的实例对象。
> * **pageContext**：页面上下文对象。
> * **exception**：异常，错误对象。



### JSP页面跳转方式

> 转发：
>
> ​	**请求数据**：请求数据不会改变，转发之后请求数据可以实现共享。
>
> ​	**请求数量**：请求只有一个。
>
> ​	**操作的对象**：请求转发时，是通过请求进行操作的。
>
> ​	**地址栏**：地址栏内容只会改变一次，改变的值为后端接口的url
>
> ​	**目的地**：只能从后台接口跳转向后台接口。
>
> 重定向：
>
> **发起者**：由响应发起重定向
>
> **请求数量**：重定向操作的请求有两个。
>
> ​	**数据**：请求之间的数据不能共享。	
>
> ​	**地址栏**：地址栏上的路径有两个，会进行两次路径跳转，一个路径是后台的请求路径，第二个路径是前端的页面路径。
>
> ​	**目的地**：重定向是在页面上发生的，是由一个页面跳向另一个页面。

## 请求方式

**什么是请求？**

​	一个服务向另一个服务发送申请，以获取某些数据，或者说是前端向后台发送一个申请，去实现某个功能或获取某些目标数据。

​	请求就是服务或前端向另一个服务或后台发送申请的操作。在Java代码中，请求通常使用 request 来代表。

​	请求后返回的数据以及处理请求的操作，被叫做响应，响应通常使用 response 来代表。



想要处理请求，一定要有处理请求的服务的地址。在互联网环境下，一个服务要想被他人访问到，需要提供一个公开的地址，供他人访问。

> 例：https://www.baidu.com/
>
> 百度这个连接，所提供的访问路径叫做，域名 ，baidu.com。
>
> http \ https是网络协议，这两个同属于http协议。
>
> www. 属于网络协议。
>
> 真正的地址叫什么？是什么样的？
>
> ​	https://177.103.59.21:8088/baiduSearch
>
> 一个互联网地址，通常能够直接被访问的是域名，地址通常是被隐藏且被代理服务器代理的。
>
> 一个地址一定由  **http协议+ip地址+端口号+服务名+服务路径**，这个地址被称为**URL**。

**URL与请求的关系：**

* 请求一定是基于URL发送的。
* 请求的方式不同，URL也会有不同的状态。

**常用的请求方式：**

* Get请求：

  * > https://cn.bing.com/translator?ref=TThis&text=&from=en&to=zh-Hans
    >
    > get请求，特点是：
    >
    > 1. 请求过程中传输的参数都会展示在地址栏上。
    > 2. get请求发送数据有长度限制，最大数据长度为128K
    > 3. get请求的安全性不高，通常用于处理一些隐私度不高的需求。

* Post请求：

  * > 1. post请求过程中，所有的请求相关的数据，都会隐式发送，不会体现在地址栏上。
    > 2. post请求发送数据，没有数据长度限制。
    > 3. post请求安全性相对比较高，通常用于处理一些有敏感信息的请求。



## Session与Cookie

### Session

Session是什么？

> HTTP协议是一种无状态的协议。session主要是用来辅助HTTP协议对用户状态以及服务器状态进行记录的对象。

session的特性：

> * 每个客户端只持有一个Session。Session在客户端关闭之前或服务器关闭之前会一直存在。
> * Session与Session之间的数据不互通，每个Session都是一个独立的客户端与服务器之间的通信。
> * Session会自动关闭，自动关闭的条件是客户端长时间未进行操作（默认为30分钟<由Tomcat在conf目录的web.xml文件中进行设置>），服务器端会自动将Session会话关闭。

Session会话的最大超时时间：

> tips：最大超时时间的最小时间单位是分钟。
>
> 有三种设置方法：
>
> 1. Tomcat中，在conf文件夹下的web.xml配置文件下，有一个<session-config>标签，其中设置了最大超时时间30分钟
> 2. 项目的web.xml文件中，可以直接配置<session-config>，配置方式与Tomcat中的配置方式一致。
> 3. 代码中设置，使用HttpSession的实例对象，调用setMaxInactiveInterval() 方法进行设置

Session的属性设置

> * session可以实现会话中的属性共享，通过setAttribute方法进行属性设置，通过getAttribute方法进行属性获取。
> * 属性以键值对方式存在，在设置时需要设置String类型的属性名。同一属性名的属性只能在第一次设置时创建新属性，第二次及以后进行设置时，会覆盖同名的属性之前所设置的属性。
> * 所有的用户属性在设置之前，获取时都是null，设置之后获取的值可以为任意类型。

## TIPS

1. 创建项目的步骤
   1. 建包
   2. 构建数据库
   3. 创建与数据库表对应的实体类
